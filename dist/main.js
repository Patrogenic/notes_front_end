(()=>{"use strict";const e="http://localhost:3000",t="/dist/";let n={updateFolderData:async function(e,t,n,l){let a=await o.sendData(e,t,n,l);console.log(a)},deleteFolder:async function(e,t,n,l){let a=await o.sendData(e,t,n,l);console.log(a),a.message.localeCompare("success")},updateNoteData:async function(e,t,n,l){let a=await o.sendData(e,t,n,l);console.log(a)},deleteNote:async function(e,t,n,l){let a=await o.sendData(e,t,n,l);console.log(a)}},o=new class{constructor(){}getAllFolders(){const e=JSON.parse(localStorage.getItem("user")).token;return fetch("url",{method:"get",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer "+e}}).then((e=>(console.log(e),e.json()))).then((e=>{console.log(e)}))}getData(e,t,n){const o=JSON.parse(localStorage.getItem("user")).token;return fetch(e,{method:t,headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer "+o}}).then((e=>200!=e.status?e.status:e.json())).then((e=>n(e)))}sendData(e,t,n,o){const l=JSON.parse(localStorage.getItem("user")).token;return fetch(e,{method:t,headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer "+l},body:JSON.stringify(n)}).then((e=>200!=e.status?e.status:e.json())).then((e=>o(e)))}},l=new class{constructor(){}toggleLoginTabs(){let e=document.getElementById("login-form"),t=document.getElementById("signup-form"),n=document.getElementById("login-tab"),o=document.getElementById("signup-tab");n.addEventListener("click",(()=>{e.style.display="block",t.style.display="none",n.style.backgroundColor="lightgrey",o.style.backgroundColor="transparent"})),o.addEventListener("click",(()=>{e.style.display="none",t.style.display="block",n.style.backgroundColor="transparent",o.style.backgroundColor="lightgrey"}))}displayAllFolderData(e,t){this.displayFolders(e,t)}displayFolders(e,t){console.log("http "+t);let n=document.getElementById("folders-container"),o=(document.getElementById("notes-container"),document.createElement("div"));for(let l=0;l<e.length;l++)o.innerHTML=e[l].name,o.id=l,o.classList.add("folder"),o.addEventListener("click",this.toggleCurrentFolder),n.appendChild(o),o=document.createElement("div"),this.buildNotesContainer(e[l],l,t)}addFolder(e){let t=document.getElementById("folders-container"),n=document.createElement("div");n.innerHTML=e.name,n.id=t.childNodes.length,n.classList.add("folder"),n.addEventListener("click",this.toggleCurrentFolder),t.appendChild(n)}buildNotesContainer(e,t,n){let o=document.getElementById("notes-container"),l=document.createElement("div");l.classList.add("notes-sub-container"),l.id="notes-sub-container"+t;let a=document.createElement("div");a.innerHTML=e.name;let d=document.createElement("button");d.innerHTML="delete",d.addEventListener("click",(()=>{n.deleteFolder("http://localhost:3000/api/folder/"+e._id,"delete",{},(e=>e))}));let s=document.createElement("div");s.innerHTML=e.description,l.appendChild(a),l.appendChild(d),l.appendChild(s);let r=document.createElement("div");for(let t=0;t<e.notes.length;t++)r.innerHTML=e.notes[t].name,l.appendChild(r),r=document.createElement("div");o.appendChild(l)}toggleCurrentFolder(e){let t=document.getElementsByClassName("notes-sub-container");for(let e=0;e<t.length;e++)t[e].style.display="none";document.getElementById("notes-sub-container"+e.srcElement.id).style.display="block"}openNewFolderForm(){document.getElementById("new-folder-popup-wrapper").style.display="block"}closeNewFolderForm(){document.getElementById("new-folder-popup-wrapper").style.display="none"}};0===window.location.pathname.localeCompare(t+"login.html")?(l.toggleLoginTabs(),console.log("login page"),document.getElementById("login-form").addEventListener("submit",(e=>{e.preventDefault(),async function(e,t,n,l){let a=await o.sendData("http://localhost:3000/api/login","post",n,(e=>e));localStorage.setItem("user",JSON.stringify(a)),null!=a.token?window.location.href="dashboard.html":(document.getElementById("login-response").innerHTML="Invalid Credentials",console.log("invalid credentials"))}(0,0,{username:document.getElementById("username-field").value,password:document.getElementById("password-field").value})}))):0===window.location.pathname.localeCompare(t+"dashboard.html")&&(async function(){let t=await o.getData(e+"/api/folders","get",(e=>e));console.log(t),console.log(t.folderData),403===t?window.location.href="login.html":l.displayAllFolderData(t.folderData,n)}(),document.getElementById("open-new-folder-form").addEventListener("click",l.openNewFolderForm),document.getElementById("close-new-folder-popup").addEventListener("click",l.closeNewFolderForm),document.getElementById("new-folder-form").addEventListener("submit",(e=>{e.preventDefault();let t=document.getElementById("new-folder-name-field").value,n=document.getElementById("new-folder-description-field").value;document.getElementById("new-folder-name-field").value="",document.getElementById("new-folder-description-field").value="",async function(e,t,n,a){let d=await o.sendData("http://localhost:3000/api/folder","post",n,(e=>e));console.log(d),null!=d.name&&l.addFolder(d)}(0,0,{name:t,description:n})})))})();